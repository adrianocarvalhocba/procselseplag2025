import{a as L}from"./chunk-J5RFGTCZ.js";import{B as oe,E as ie,F as h,G as P,J as ae,e as j,f as U,g as q,h as B,i as G,j as $,l as M,m as Z,n as H,o as J,p as K,q as Q,r as W,s as X,t as Y,u as x,v as ee,z as te}from"./chunk-GBZCZK63.js";import{Ab as t,Ba as F,Bb as e,Cb as d,Fb as I,Ib as c,Jb as f,Rb as i,Sb as y,Tb as b,Ua as S,Ub as N,Wb as v,Xa as s,Xb as R,da as m,ia as u,ob as w,qa as E,qb as l,ra as D,vb as _,vc as V,wb as T,yb as O,zb as z}from"./chunk-DXFUJXF7.js";var ne=(()=>{class n{constructor(){this.arquivosAceitos="image/*",this.fotoNova=new F}selecionandoArquivo(a){let r=a.target;if(r.files&&r.files.length>0){let o=r.files[0];this.fotoNova.emit(o)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=u({type:n,selectors:[["anexa-foto"]],inputs:{arquivosAceitos:"arquivosAceitos"},outputs:{fotoNova:"fotoNova"},standalone:!0,features:[v],decls:8,vars:1,consts:[["type","file",1,"hidden",3,"change","accept"],[1,"mt-2","mb-2"],[1,"flex","flex-col","items-center","justify-center","text-center","w-32","min-h-32","h-full","rounded-lg","cursor-pointer","border-2","border-gray-300","border-dashed","hover:bg-hover"]],template:function(r,o){r&1&&(t(0,"label")(1,"input",0),c("change",function(C){return o.selecionandoArquivo(C)}),e(),d(2,"div",1),t(3,"div",2)(4,"mat-icon"),i(5,"add"),e(),t(6,"span"),i(7,"Adicionar Foto/Imagem"),e()()()),r&2&&(s(),l("accept",o.arquivosAceitos))},dependencies:[h,x]})}}return n})();function le(n,g){if(n&1){let a=I();t(0,"div",1),d(1,"img",2),t(2,"button",3),c("click",function(){let o=E(a).$index,p=f();return D(p.remover(o))}),t(3,"mat-icon"),i(4,"delete"),e()()()}if(n&2){let a=g.$implicit,r=g.$index;s(),l("src",a.url,S)("alt","Foto "+r)}}var re=(()=>{class n{constructor(){this.fotosAnexadas=[],this.removeFoto=new F}remover(a){this.removeFoto.emit(a)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=u({type:n,selectors:[["mostra-fotos"]],inputs:{fotosAnexadas:"fotosAnexadas"},outputs:{removeFoto:"removeFoto"},standalone:!0,features:[v],decls:3,vars:0,consts:[[1,"flex","flex-wrap"],[1,"flex","flex-col","items-center","w-24","h-24","m-3","relative","border","border-gray-700","rounded-md","bg-green-200"],[1,"w-full","h-full","object-cover","rounded-md",3,"src","alt"],["type","button",1,"text-red-500","absolute","top-24","right-10",3,"click"]],template:function(r,o){r&1&&(t(0,"div",0),O(1,le,5,2,"div",1,T),e()),r&2&&(s(),z(o.fotosAnexadas))},dependencies:[h,x]})}}return n})();var se=(()=>{class n{constructor(){this._utilService=m(ae),this._painelPessoasFacade=m(L),this.dialogRef=m(H),this.data=m(J),this._formBuilder=m($),this.fotos=[]}ngOnInit(){this.criaFormulario()}criaFormulario(){this.formDados=this._formBuilder.group({informacoes:[null],data:[null],descricao:[null],ocoId:[null]}),this.formDados.patchValue(this.data)}anexaFoto(a){if(!this.fotos.find(o=>o.file.name===a.name)){let o={file:a,url:URL.createObjectURL(a)};this.fotos.push(o)}}removeFoto(a){URL.revokeObjectURL(this.fotos[a].url),this.fotos.splice(a,1)}salvaInformacoes(){if(!this.formDados.get("informacoes")?.value){this._utilService.mensagem(P.ERROR,"Campo 'Informa\xE7\xF5es' n\xE3o pode ser vazio!");return}if(!this.formDados.get("data")?.value){this._utilService.mensagem(P.ERROR,"Campo 'Data' n\xE3o pode ser vazio!");return}if(!this.formDados.get("descricao")?.value){this._utilService.mensagem(P.ERROR,"Campo 'Descri\xE7\xE3o do(s) anexo(s)' n\xE3o pode ser vazio!");return}this._painelPessoasFacade.salvaInformacoes(this.formDados.getRawValue(),this.fotos).subscribe({next:()=>this.dialogRef.close()})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=u({type:n,selectors:[["app-dialog-envia-informacoes"]],standalone:!0,features:[v],decls:39,vars:5,consts:[[1,"flex","items-center","justify-between","h-14","text-white","!bg-blue-800"],[1,"text-md","font-semibold","ml-4","tracking-wider"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"space-y-6","text-black",3,"formGroup"],["matInput","","type","text","formControlName","informacoes"],["matInput","","type","text","formControlName","data","mask","d0/M0/0000",1,"!w-40",3,"dropSpecialCharacters","leadZeroDateTime"],[1,"border","w-full","p-2","rounded-md","bg-white","mt-4"],[1,"bg-gray-200","px-2","rounded-md","text-sm"],[1,"p-2"],["matInput","","type","text","formControlName","descricao"],[1,"flex","flex-col","sm:flex-row","items-center","justify-center","mb-4"],[3,"fotoNova"],[3,"removeFoto","fotosAnexadas"],[1,"border-2","mt-2","mb-2"],[1,"flex","flex-row","justify-end","w-full"],["type","button","mat-raised-button","","matTooltip","Envia dados","mat-stroked-button","",1,"!bg-blue-800","!text-white","hover:!bg-blue-600",3,"click"],["type","button","mat-raised-button","","matTooltip","Fecha esta Janela","mat-dialog-close","","mat-stroked-button","",1,"!bg-blue-800","!text-white","hover:!bg-blue-600"]],template:function(r,o){r&1&&(t(0,"div",0)(1,"div",1),i(2," Envia Informa\xE7\xF5es sobre o Desaparecido "),e(),t(3,"button",2)(4,"mat-icon"),i(5,"close"),e()()(),t(6,"mat-dialog-content")(7,"div",3)(8,"div")(9,"mat-label"),i(10," Caso possua informa\xE7\xF5es sobre a pessoa desaparecida, informe abaixo: "),e(),d(11,"input",4),e(),t(12,"div")(13,"mat-label"),i(14," Essas informa\xE7\xF5es possuem data? informe abaixo: "),e(),d(15,"input",5),e(),t(16,"fieldset",6)(17,"legend",7),i(18," Anexar Foto(s)/Imagem(s) "),e(),t(19,"div",8)(20,"mat-label"),i(21," Descreva a imagem a ser anexada abaixo: "),e(),d(22,"input",9),e(),t(23,"div",10)(24,"anexa-foto",11),c("fotoNova",function(C){return o.anexaFoto(C)}),e(),t(25,"mostra-fotos",12),c("removeFoto",function(C){return o.removeFoto(C)}),e()()()()(),t(26,"mat-dialog-actions"),d(27,"div",13),t(28,"div",14)(29,"div",8)(30,"button",15),c("click",function(){return o.salvaInformacoes()}),t(31,"mat-icon"),i(32,"upload"),e(),i(33," Enviar "),e()(),t(34,"div",8)(35,"button",16)(36,"mat-icon"),i(37,"arrow_back_ios"),e(),i(38," Voltar "),e()()()()),r&2&&(s(3),l("tabIndex",-1),s(4),l("formGroup",o.formDados),s(8),l("dropSpecialCharacters",!1)("leadZeroDateTime",!0),s(10),l("fotosAnexadas",o.fotos))},dependencies:[h,x,M,Z,ee,Y,j,U,q,B,G,Q,X,W,ie,re,ne],styles:["input[_ngcontent-%COMP%]{display:block;height:2rem;width:100%;border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem .5rem;font-size:.875rem;line-height:1.25rem;text-transform:uppercase;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}mat-label[_ngcontent-%COMP%]{font-weight:500;--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}"]})}}return n})();var me=()=>["/PainelPessoas"];function ce(n,g){if(n&1&&(t(0,"div",4),i(1),e()),n&2){let a=f();s(),N(" (",a.tituloFoto," a ",a.qtdeDiasDesap," dias) ")}}function pe(n,g){if(n&1&&(t(0,"div",5),i(1),e()),n&2){let a=f();s(),b(" (Ficou desaparecido(a) por ",a.qtdeDiasDesap," dias) ")}}function ue(n,g){if(n&1&&(t(0,"div")(1,"div"),i(2,"Data da Localiza\xE7\xE3o:"),e(),t(3,"div",7),i(4),e()()),n&2){let a=f();s(4),b(" ",a.dtLocalizacao," ")}}function fe(n,g){if(n&1&&(t(0,"div")(1,"div"),i(2,"Encontrado(a) Vivo:"),e(),t(3,"div",7),i(4),e()()),n&2){let a=f();s(4),b(" ",!(a.dadosPessoa==null||a.dadosPessoa.ultimaOcorrencia==null)&&a.dadosPessoa.ultimaOcorrencia.encontradoVivo?"Sim":"N\xE3o"," ")}}function ve(n,g){if(n&1){let a=I();t(0,"div",10)(1,"button",12),c("click",function(){E(a);let o=f();return D(o.enviaInformacoes())}),t(2,"mat-icon"),i(3,"add_comment"),e(),i(4," Enviar Informa\xE7\xF5es "),e()()}}var Ye=(()=>{class n{constructor(){this.dialog=m(K),this._route=m(te),this._painelPessoasFacade=m(L)}ngOnInit(){this.dadosPessoa=this._painelPessoasFacade.getPessoa(Number(this._route.snapshot.url[1].path)),(!this.dadosPessoa.urlFoto||this.dadosPessoa.urlFoto==null)&&(this.dadosPessoa.sexo==="MASCULINO"?this.dadosPessoa.urlFoto="assets/sem-foto-masculino.png":this.dadosPessoa.urlFoto="assets/sem-foto-feminino.png"),this.dtDesaparecimento=this.dadosPessoa.ultimaOcorrencia.dtDesaparecimento,this.dtLocalizacao=this.dadosPessoa.ultimaOcorrencia.dataLocalizacao;let a=new Date(Date.now()),r=new Date(this.dadosPessoa.ultimaOcorrencia.dtDesaparecimento),o=Math.abs(r-a);this.qtdeDiasDesap=Math.round(o/(1e3*60*60*24));let p=this.dadosPessoa.ultimaOcorrencia.dtDesaparecimento.split("T");this.dtDesaparecimento=p[0].split("-").reverse().join("/"),this.dtDesaparecimento+=" - "+p[1],this.dtLocalizacao&&(this.dtLocalizacao=this.dadosPessoa.ultimaOcorrencia.dataLocalizacao.split("-").reverse().join("/")),this.dadosPessoa.ultimaOcorrencia.dataLocalizacao?this.dadosPessoa.sexo==="MASCULINO"?this.tituloFoto="Localizado":this.tituloFoto="Localizada":this.dadosPessoa.sexo==="MASCULINO"?this.tituloFoto="Desaparecido":this.tituloFoto="Desaparecida"}enviaInformacoes(){this.dialog.open(se,{data:{ocoId:this.dadosPessoa.ultimaOcorrencia.ocoId},disableClose:!0})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=u({type:n,selectors:[["app-detalhamento-caso"]],standalone:!0,features:[v],decls:44,vars:16,consts:[[1,"flex","flex-col","md:flex-row","md:mx-auto","md:w-[60rem]","mt-5","p-2"],[1,"flex","flex-col","items-center"],[1,"text-3xl","font-bold","tracking-widest","uppercase","p-2","text-white",3,"ngClass"],["alt","foto",1,"object-cover","h-80","border-4","rounded-md","mt-2",3,"ngClass","src"],[1,"text-xl","font-medium","tracking-wide"],[1,"text-sm","md:text-xl","text-white","font-medium","tracking-wide"],[1,"flex","flex-col","mt-10","p-5","font-medium","space-y-5"],[1,"font-bold"],[1,"border-t","mt-4","mb-4"],[1,"flex","flex-row","flex-wrap","justify-center","mt-2","mb-5"],[1,"p-2"],["type","button","mat-raised-button","","matTooltip","Volta para o in\xEDcio",1,"!bg-blue-800","!text-white","hover:!bg-blue-600",3,"routerLink"],["mat-raised-button","","matTooltip","Acrescenta Informa\xE7\xF5es da pessoa Desaparecida","type","button",1,"!bg-blue-800","!text-white","hover:!bg-blue-600",3,"click"]],template:function(r,o){r&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),i(3),e(),t(4,"div"),d(5,"img",3),e(),w(6,ce,2,2,"div",4)(7,pe,2,1,"div",5),e(),t(8,"div",6)(9,"div")(10,"div"),i(11,"Nome:"),e(),t(12,"div",7),i(13),e()(),t(14,"div")(15,"div"),i(16,"Sexo:"),e(),t(17,"div",7),i(18),e()(),t(19,"div")(20,"div"),i(21,"Idade:"),e(),t(22,"div",7),i(23),e()(),t(24,"div")(25,"div"),i(26,"Data/Hora do Desaparecimento:"),e(),t(27,"div",7),i(28),e()(),t(29,"div")(30,"div"),i(31,"Local do Desaparecimento:"),e(),t(32,"div",7),i(33),e()(),w(34,ue,5,1,"div")(35,fe,5,1,"div"),e()(),d(36,"div",8),t(37,"div",9),w(38,ve,5,0,"div",10),t(39,"div",10)(40,"button",11)(41,"mat-icon"),i(42,"arrow_back_ios"),e(),i(43," Voltar "),e()()()),r&2&&(s(2),l("ngClass",o.dtLocalizacao?"text-green-300 bg-green-900 rounded-md":"text-red-300 bg-red-800 rounded-md"),s(),b(" ",o.tituloFoto," "),s(2),l("ngClass",o.dtLocalizacao?"border-green-600":"border-orange-800")("src",o.dadosPessoa==null?null:o.dadosPessoa.urlFoto,S),s(),_(6,o.dtLocalizacao?-1:6),s(),_(7,o.dtLocalizacao?7:-1),s(6),y(o.dadosPessoa==null?null:o.dadosPessoa.nome),s(5),y(o.dadosPessoa==null?null:o.dadosPessoa.sexo),s(5),y(o.dadosPessoa==null?null:o.dadosPessoa.idade),s(5),b(" ",o.dtDesaparecimento," "),s(5),b(" ",o.dadosPessoa==null||o.dadosPessoa.ultimaOcorrencia==null?null:o.dadosPessoa.ultimaOcorrencia.localDesaparecimentoConcat," "),s(),_(34,o.dtLocalizacao?34:-1),s(),_(35,o.dtLocalizacao?35:-1),s(3),_(38,o.dtLocalizacao?-1:38),s(2),l("routerLink",R(15,me)))},dependencies:[h,V,x,M,oe]})}}return n})();export{Ye as DetalhamentoCasoComponent};
