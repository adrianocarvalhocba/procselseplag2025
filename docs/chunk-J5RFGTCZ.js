import{G as o,H as m,J as h}from"./chunk-GBZCZK63.js";import{U as l,Z as i,da as r,j as n,k as c}from"./chunk-DXFUJXF7.js";var P=(()=>{class e{constructor(){this._carregandoListaPessoas$=new c(!1),this._listaPessoas$=new c({})}get carregandoListaPessoas$(){return this._carregandoListaPessoas$.asObservable()}set carregandoListaPessoas(s){this._carregandoListaPessoas$.next(s)}get carregandoListaPessoas(){return this._carregandoListaPessoas$.value}get listaPessoas$(){return this._listaPessoas$.asObservable()}set listaPessoas(s){sessionStorage.setItem("lista",JSON.stringify(s)),this._listaPessoas$.next(s)}get listaPessoas(){return Object.keys(this._listaPessoas$.value).length===0&&(this.listaPessoas=JSON.parse(sessionStorage.getItem("lista"))),this._listaPessoas$.value}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var L=(()=>{class e{constructor(){this._abitusService=r(m),this._painelPessoasState=r(P),this._utilService=r(h),this.removeInscricao$=new n,this.carregandoListaPessoas$=this._painelPessoasState.carregandoListaPessoas$,this.listaPessoas$=this._painelPessoasState.listaPessoas$}carregaListaPessoas(s){this._painelPessoasState.carregandoListaPessoas=!0,this._abitusService.listaPessoas(s).pipe(l(this.removeInscricao$)).subscribe({next:t=>{this._painelPessoasState.listaPessoas=t},error:()=>this._utilService.mensagem(o.ERROR,"Erro ao carregar a lista das pessoas!"),complete:()=>{this._painelPessoasState.carregandoListaPessoas=!1}})}getPessoa(s){return this._painelPessoasState.listaPessoas.content.find(t=>t.id===s)}salvaInformacoes(s,t){let a=new n;return this._abitusService.salvaInformacoes(s,t).subscribe({error:p=>{this._utilService.mensagem(o.ERROR,`Erro ao salvar as informa\xE7\xF5es da pessoa: ${p.message}`),a.next(!1),a.complete()},complete:()=>{this._utilService.mensagem(o.SUCCESS,"Informa\xE7\xF5es salvas com sucesso!"),a.next(!0),a.complete()}}),a}ngOnDestroy(){this.removeInscricao$.next(),this.removeInscricao$.complete()}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275prov=i({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();export{L as a};
