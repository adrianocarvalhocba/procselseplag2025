import{a as D}from"./chunk-J5RFGTCZ.js";import{B as se,E as le,F as S,G as me,J as de,a as I,e as U,f as G,g as J,h as Q,i as q,j as H,k as Z,l as E,m as K,n as W,o as X,p as Y,q as ee,r as te,s as ae,t as ie,u as O,v as oe,w as ne,x as z,y as re}from"./chunk-GBZCZK63.js";import{Ab as n,Bb as o,Cb as c,Fb as k,Ib as u,Jb as f,Nb as V,Ob as j,Pb as A,Rb as r,Tb as g,U as M,Ua as N,Wb as _,Xa as s,Xb as L,Yb as B,Zb as R,da as p,ia as v,j as T,ob as C,qa as b,qb as d,ra as P,vb as h,vc as $,wb as F,yb as w,zb as y}from"./chunk-DXFUJXF7.js";var ge=(i,m)=>({"!bg-green-300":i,"!bg-red-400":m});function he(i,m){if(i&1&&(n(0,"div",5),r(1),o(),n(2,"div",5),r(3),o()),i&2){let e=f();s(),g(" Localiza\xE7\xE3o em: ",e.dtLocalizacao," "),s(2),g(" Encontrado Vivo: ",e.dadosPessoa.ultimaOcorrencia.encontradoVivo?"SIM":"N\xC3O"," ")}}function xe(i,m){if(i&1&&(n(0,"div",5),r(1),o(),n(2,"div",5),r(3),o()),i&2){let e=f();s(),g(" Desaparecimento em: ",e.dtDesaparecimento," "),s(2),g(" Local: ",e.dadosPessoa.ultimaOcorrencia.localDesaparecimentoConcat," ")}}var ce=(()=>{class i{constructor(){this.dadosPessoa={},this.dtLocalizacao="",this.dtDesaparecimento=""}ngOnInit(){this.dadosPessoa.ultimaOcorrencia.dataLocalizacao&&(this.dtLocalizacao=this.dadosPessoa.ultimaOcorrencia.dataLocalizacao.split("-").reverse().join("/")),this.dtDesaparecimento=this.dadosPessoa.ultimaOcorrencia.dtDesaparecimento.split("T")[0].split("-").reverse().join("/")}onErroCarregarImagem(e){let t=e.target;this.dadosPessoa.sexo==="MASCULINO"?t.src="assets/sem-foto-masculino.png":t.src="assets/sem-foto-feminino.png"}ngAfterContentChecked(){(!this.dadosPessoa.urlFoto||this.dadosPessoa.urlFoto==null)&&(this.dadosPessoa.sexo==="MASCULINO"?this.dadosPessoa.urlFoto="assets/sem-foto-masculino.png":this.dadosPessoa.urlFoto="assets/sem-foto-feminino.png")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-card-pessoa"]],inputs:{dadosPessoa:"dadosPessoa"},standalone:!0,features:[_],decls:8,vars:8,consts:[[1,"p-3","w-72","h-60","bg-white","rounded-lg","shadow-md","uppercase",3,"ngClass"],[1,"flex","justify-center","-mt-2"],["alt","foto",1,"object-cover","rounded-lg","h-32",3,"error","src"],[1,"flex","flex-col","items-center","justify-center"],[1,"text-center","text-sm","mt-1","font-semibold"],[1,"text-center","text-xs"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1)(2,"img",2),u("error",function(x){return a.onErroCarregarImagem(x)}),o()(),n(3,"div",3)(4,"div",4),r(5),o(),C(6,he,4,2)(7,xe,4,2),o()()),t&2&&(d("ngClass",R(5,ge,a.dadosPessoa.ultimaOcorrencia.dataLocalizacao,!a.dadosPessoa.ultimaOcorrencia.dataLocalizacao)),s(2),d("src",a.dadosPessoa.urlFoto,N),s(3),g(" ",a.dadosPessoa.nome," "),s(),h(6,a.dadosPessoa.ultimaOcorrencia.dataLocalizacao?6:-1),s(),h(7,a.dadosPessoa.ultimaOcorrencia.dataLocalizacao?-1:7))},dependencies:[S,$]})}}return i})();function Ie(i,m){if(i&1&&(n(0,"mat-option",6),r(1),o()),i&2){let e=m.$implicit;d("value",e),s(),g(" ",e.descricao," ")}}function Se(i,m){if(i&1&&(n(0,"mat-option",6),r(1),o()),i&2){let e=m.$implicit;d("value",e),s(),g(" ",e.descricao," ")}}var ue=(()=>{class i{constructor(){this._painelPessoasFacade=p(D),this.dialogRef=p(W),this.data=p(X),this._formBuilder=p(H),this._utilService=p(de),this.listaSexo=[{value:"MASCULINO",descricao:"Masculino"},{value:"FEMININO",descricao:"Feminino"}],this.listaSituacoes=[{value:"DESAPARECIDO",descricao:"Desaparecido"},{value:"LOCALIZADO",descricao:"Localizado"}]}ngOnInit(){this.criaFormulario()}criaFormulario(){this.formFiltro=this._formBuilder.group({nome:[null],sexo:[null],faixaIdadeInicial:[null],faixaIdadeFinal:[null],status:[null]});let e=sessionStorage.getItem("filtro"),t=e?JSON.parse(e):{};this.formFiltro.patchValue(t),t?.sexo?.value&&this.formFiltro.get("sexo")?.setValue(this.listaSexo.find(a=>a.value===t.sexo.value)),t?.status?.value&&this.formFiltro.get("status")?.setValue(this.listaSituacoes.find(a=>a.value===t.status.value))}aplicaFiltro(){let e={nome:this.formFiltro.get("nome").value,sexo:this.formFiltro.get("sexo").value,faixaIdadeInicial:this.formFiltro.get("faixaIdadeInicial").value,faixaIdadeFinal:this.formFiltro.get("faixaIdadeFinal").value,status:this.formFiltro.get("status").value};if(e.nome===null&&e.sexo===null&&e.faixaIdadeInicial===null&&e.faixaIdadeFinal===null&&e.status===null){this._utilService.mensagem(me.ERROR,"Para filtrar algum valor precisa ser informado!");return}sessionStorage.clear(),sessionStorage.setItem("filtro",JSON.stringify(e));let t=new I;e.nome&&(t=t.append("nome",e.nome)),e.sexo&&(t=t.append("sexo",e.sexo.value)),e.faixaIdadeInicial&&(t=t.append("faixaIdadeInicial",e.faixaIdadeInicial)),e.faixaIdadeFinal&&(t=t.append("faixaIdadeFinal",e.faixaIdadeFinal)),e.status&&(t=t.append("status",e.status.value)),this._painelPessoasFacade.carregaListaPessoas(t),this.dialogRef.close(!0)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-dialog-filtro"]],standalone:!0,features:[_],decls:45,vars:2,consts:[[1,"flex","items-center","justify-between","h-14","text-white","!bg-blue-800"],[1,"text-md","font-semibold","ml-4","tracking-wider"],["mat-icon-button","","mat-dialog-close","",3,"tabIndex"],[1,"space-y-6","min-w-96","text-black",3,"formGroup"],["matInput","","type","text","formControlName","nome","placeholder","Digite partes do nome para filtrar"],["formControlName","sexo","placeholder","Escolha um sexo para filtrar"],[1,"uppercase",3,"value"],["matInput","","type","text","formControlName","faixaIdadeInicial","mask","999","placeholder","Digite algum valor de idade para filtrar"],["matInput","","type","text","formControlName","faixaIdadeFinal","mask","999","placeholder","Digite algum valor de idade para filtrar"],["formControlName","status","placeholder","Escolha uma situa\xE7\xE3o para filtrar"],[1,"border-2","mt-2","mb-2"],[1,"flex","flex-row","justify-end","w-full"],[1,"flex","flex-row","justify-center","items-center","ml-5"],["type","button","mat-raised-button","",1,"!bg-blue-800","!text-white","hover:!bg-blue-600",3,"click"],[1,"p-2"],["type","button","mat-raised-button","","matTooltip","Fecha esta Janela","mat-dialog-close","","mat-stroked-button","",1,"!bg-blue-800","!text-white","hover:!bg-blue-600"]],template:function(t,a){t&1&&(n(0,"div",0)(1,"div",1),r(2,"Filtro"),o(),n(3,"button",2)(4,"mat-icon"),r(5,"close"),o()()(),n(6,"mat-dialog-content")(7,"div",3)(8,"div")(9,"mat-label"),r(10," Nome: "),o(),c(11,"input",4),o(),n(12,"div")(13,"mat-label"),r(14," Sexo: "),o(),n(15,"mat-select",5),w(16,Ie,2,2,"mat-option",6,F),o()(),n(18,"div")(19,"mat-label"),r(20," Idade Inicial: "),o(),c(21,"input",7),o(),n(22,"div")(23,"mat-label"),r(24," Idade Final: "),o(),c(25,"input",8),o(),n(26,"div")(27,"mat-label"),r(28," Situa\xE7\xE3o: "),o(),n(29,"mat-select",9),w(30,Se,2,2,"mat-option",6,F),o()()()(),n(32,"mat-dialog-actions"),c(33,"div",10),n(34,"div",11)(35,"div",12)(36,"button",13),u("click",function(){return a.aplicaFiltro()}),n(37,"mat-icon"),r(38,"filter_alt"),o(),r(39," Aplica Filtro "),o()(),n(40,"div",14)(41,"button",15)(42,"mat-icon"),r(43,"arrow_back_ios"),o(),r(44," Voltar "),o()()()()),t&2&&(s(3),d("tabIndex",-1),s(4),d("formGroup",a.formFiltro),s(9),y(a.listaSexo),s(14),y(a.listaSituacoes))},dependencies:[S,O,E,K,oe,ie,U,G,J,Q,q,ee,ae,te,ne,Z,le],styles:["input[_ngcontent-%COMP%]{display:block;height:2rem;width:100%;border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:1.5rem .5rem;font-size:.875rem;line-height:1.25rem;text-transform:uppercase;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}mat-select[_ngcontent-%COMP%]{display:block;height:3rem;width:100%;border-radius:.5rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1));padding:.75rem;font-size:.875rem;line-height:1.25rem;text-transform:uppercase;--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}mat-label[_ngcontent-%COMP%]{font-weight:500;--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}"]})}}return i})();var fe=()=>[],be=i=>["/DetalhamentoCaso",i];function Pe(i,m){i&1&&(n(0,"div",2),c(1,"mat-progress-bar",3),o(),n(2,"div",4),r(3,` Buscando dados, aguarde um momento...
`),o())}function Ce(i,m){if(i&1){let e=k();n(0,"div",6)(1,"button",15),u("click",function(){b(e);let a=f(2);return P(a.limpaFiltro())}),n(2,"mat-icon"),r(3,"filter_alt_off"),o(),r(4," Limpa Filtro "),o()()}}function Fe(i,m){if(i&1&&c(0,"app-card-pessoa",11),i&2){let e=m.$implicit;d("routerLink",B(2,be,e.id))("dadosPessoa",e)}}function we(i,m){if(i&1){let e=k();n(0,"div",0)(1,"div",5)(2,"div",6)(3,"button",7),u("click",function(){b(e);let a=f();return P(a.mostraFiltro())}),n(4,"mat-icon"),r(5,"filter_alt"),o(),r(6," Filtrar "),o()(),C(7,Ce,5,0,"div",6),n(8,"div")(9,"mat-paginator",8),u("page",function(a){b(e);let l=f();return P(l.paginacao(a))}),o()()(),n(10,"div",9),r(11," Clique em alguma foto abaixo para ver mais detalhes sobre o caso: "),o(),n(12,"div",10),w(13,Fe,1,4,"app-card-pessoa",11,F),o(),c(15,"div",12),n(16,"div",13)(17,"mat-paginator",14),u("page",function(a){b(e);let l=f();return P(l.paginacao(a))}),o()()()}if(i&2){let e=f();s(7),h(7,e.filtrando?7:-1),s(2),d("length",e.length)("pageIndex",e.pageIndex)("pageSize",e.pageSize)("pageSizeOptions",e.showPageSizeOptions?e.pageSizeOptions:L(9,fe)),s(4),y(e.listaPessoas),s(4),d("length",e.length)("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",e.showPageSizeOptions?e.pageSizeOptions:L(10,fe))}}function ye(i,m){i&1&&(n(0,"div",1),r(1,"Nenhuma Pessoa Desaparecida encontrada."),o())}var lt=(()=>{class i{constructor(){this.dialog=p(Y),this._painelPessoasFacade=p(D),this.length=0,this.pageSize=10,this.pageIndex=0,this.pageSizeOptions=[10,20,40,100],this.showPageSizeOptions=!0,this.listaPessoas=[],this.filtrando=!1,this.removeInscricao$=new T}ngOnInit(){this.parametros=new I;let e=sessionStorage.getItem("pagina")||0;e&&(this.pageIndex=Number(e),this.parametros=this.parametros.append("pagina",e));let t=sessionStorage.getItem("porPagina")||10;t&&(this.pageSize=Number(t),this.parametros=this.parametros.append("porPagina",t)),this._painelPessoasFacade.carregandoListaPessoas$.pipe(M(this.removeInscricao$)).subscribe({next:x=>{this.carregando=x}}),this._painelPessoasFacade.listaPessoas$.pipe(M(this.removeInscricao$)).subscribe({next:x=>{this.listaPessoas=x.content,this.length=x.totalElements}});let a=sessionStorage.getItem("filtro"),l=a?JSON.parse(a):{};Object.keys(l).length>0&&(this.filtrando=!0),l.nome&&(this.parametros=this.parametros.append("nome",l.nome)),l?.sexo?.value&&(this.parametros=this.parametros.append("sexo",l.sexo.value)),l.faixaIdadeInicial&&(this.parametros=this.parametros.append("faixaIdadeInicial",l.faixaIdadeInicial)),l.faixaIdadeFinal&&(this.parametros=this.parametros.append("faixaIdadeFinal",l.faixaIdadeFinal)),l?.status?.value&&(this.parametros=this.parametros.append("status",l.status.value)),this._painelPessoasFacade.carregaListaPessoas(this.parametros)}paginacao(e){this.length=e.length,this.pageSize=e.pageSize,this.pageIndex=e.pageIndex,this.parametros=new I().set("pagina",this.pageIndex).set("porPagina",this.pageSize),sessionStorage.setItem("pagina",this.pageIndex.toString()),sessionStorage.setItem("porPagina",this.pageSize.toString());let t=sessionStorage.getItem("filtro"),a=t?JSON.parse(t):{};a.nome&&(this.parametros=this.parametros.append("nome",a.nome)),a?.sexo?.value&&(this.parametros=this.parametros.append("sexo",a.sexo.value)),a.faixaIdadeInicial&&(this.parametros=this.parametros.append("faixaIdadeInicial",a.faixaIdadeInicial)),a.faixaIdadeFinal&&(this.parametros=this.parametros.append("faixaIdadeFinal",a.faixaIdadeFinal)),a?.status?.value&&(this.parametros=this.parametros.append("status",a.status.value)),this._painelPessoasFacade.carregaListaPessoas(this.parametros)}mostraFiltro(){this.dialog.open(ue,{disableClose:!0}).afterClosed().subscribe({next:t=>{!this.filtrando&&t&&(this.filtrando=t)}})}limpaFiltro(){this.filtrando=!1,sessionStorage.clear(),this.matPaginator.firstPage(),this.parametros=new I().set("pagina",this.pageIndex).set("porPagina",this.pageSize),sessionStorage.setItem("pagina",this.pageIndex.toString()),sessionStorage.setItem("porPagina",this.pageSize.toString()),this._painelPessoasFacade.carregaListaPessoas(this.parametros)}ngOnDestroy(){this.removeInscricao$.next(),this.removeInscricao$.complete()}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-painel-pessoas"]],viewQuery:function(t,a){if(t&1&&V(z,5),t&2){let l;j(l=A())&&(a.matPaginator=l.first)}},standalone:!0,features:[_],decls:3,vars:3,consts:[[1,"flex","flex-col","justify-between","h-full"],[1,"p-5"],[1,"mt-1"],["mode","query"],[1,"p-5","font-medium","text-lg","tracking-wide"],[1,"flex","flex-row","justify-between","bg-white","w-full"],[1,"flex","flex-row","justify-center","items-center","ml-5"],["type","button","mat-raised-button","",1,"!bg-blue-800","!text-white","hover:!bg-blue-600",3,"click"],["showFirstLastButtons","",3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"text-center","mt-2"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","2xl:grid-cols-5","gap-8","m-5"],[1,"mx-auto","transition","duration-300","ease-in-out","hover:scale-110","hover:shadow-2xl","cursor-pointer",3,"routerLink","dadosPessoa"],[1,"flex","flex-grow"],[1,"w-full"],["showFirstLastButtons","",1,"bg-red-500",3,"page","length","pageSize","pageIndex","pageSizeOptions"],["type","button","mat-raised-button","",1,"!bg-green-700","!text-white","hover:!bg-green-500",3,"click"]],template:function(t,a){t&1&&C(0,Pe,4,0)(1,we,18,11,"div",0)(2,ye,2,0,"div",1),t&2&&(h(0,a.carregando?0:-1),s(),h(1,!a.carregando&&a.listaPessoas?1:-1),s(),h(2,!a.carregando&&!a.length?2:-1))},dependencies:[S,O,E,z,re,se,ce]})}}return i})();export{lt as PainelPessoasComponent};
